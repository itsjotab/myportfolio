{"ast":null,"code":"import request from 'request-promise';\nimport htmlParser from 'node-html-parser';\nimport { EventEmitter } from 'events';\nimport { getElementsByHandler, parseAttributes } from './htmlHelpers.js';\nconsole.log(htmlParser);\nexport default class FlatIcon extends EventEmitter {\n  constructor(query, count) {\n    super();\n    this.items = [];\n\n    (async () => {\n      let pageId = 1;\n\n      while (this.items.length < count) {\n        const pageResults = await getPage(query, pageId);\n        this.items = this.items.concat(pageResults.items);\n        this.emit(\"data\", pageResults);\n        pageId++;\n      }\n\n      this.emit(\"end\");\n    })();\n  }\n\n}\n/*export default async function get(query, count = 96) {\n  const page1Results = await getPage(query, 1);\n  console.log(page1Results);\n}*/\n\nexport async function getPage(query, pageId) {\n  const url = getUrl('https://www.flaticon.com/search/' + pageId, {\n    word: 'coffee'\n  });\n  const refererUrl = getUrl('https://www.flaticon.com/search/' + (pageId - 1), {\n    word: 'coffee'\n  });\n  const resultRaw = await request(url, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json, text/javascript, */*; q=0.01',\n      'Host': 'www.flaticon.com',\n      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Safari/605.1.15',\n      'Accept-Language': 'de-de',\n      'Referer': refererUrl,\n      'Connection': 'keep-alive',\n      'X-Requested-With': 'XMLHttpRequest'\n    }\n  });\n  const result = JSON.parse(resultRaw);\n  return result;\n}\nexport function getUrl(urlBase, params) {\n  return urlBase + '?' + Object.entries(params).map(entry => entry.join(\"=\")).join(\"&\");\n}","map":{"version":3,"names":["request","htmlParser","EventEmitter","getElementsByHandler","parseAttributes","console","log","FlatIcon","constructor","query","count","items","pageId","length","pageResults","getPage","concat","emit","url","getUrl","word","refererUrl","resultRaw","method","headers","result","JSON","parse","urlBase","params","Object","entries","map","entry","join"],"sources":["/Users/itsjotab/portfolio/node_modules/flaticon/main.js"],"sourcesContent":["import request from 'request-promise';\nimport htmlParser from 'node-html-parser';\nimport { EventEmitter } from 'events';\n\nimport { getElementsByHandler, parseAttributes } from './htmlHelpers.js';\n\nconsole.log(htmlParser);\n\nexport default class FlatIcon extends EventEmitter {\n  constructor(query, count) {\n    super();\n\n    this.items = [];\n\n    (async () => {\n      let pageId = 1;\n      while (this.items.length < count) {\n\n        const pageResults = await getPage(query, pageId);\n\n        this.items = this.items.concat(pageResults.items);\n        this.emit(\"data\", pageResults);\n        pageId++;\n      }\n      this.emit(\"end\");\n    })();\n  }\n}\n\n/*export default async function get(query, count = 96) {\n  const page1Results = await getPage(query, 1);\n  console.log(page1Results);\n}*/\nexport async function getPage(query, pageId) {\n  const url = getUrl('https://www.flaticon.com/search/' + pageId, {\n    word: 'coffee'\n  });\n\n  const refererUrl = getUrl('https://www.flaticon.com/search/' + (pageId - 1), {\n    word: 'coffee'\n  });\n  const resultRaw = await request(url, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json, text/javascript, */*; q=0.01',\n      'Host': 'www.flaticon.com',\n      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Safari/605.1.15',\n      'Accept-Language': 'de-de',\n      'Referer': refererUrl,\n      'Connection': 'keep-alive',\n      'X-Requested-With': 'XMLHttpRequest'\n    }\n  });\n\n  const result = JSON.parse(resultRaw);\n  return result;\n}\nexport function getUrl(urlBase, params) {\n  return urlBase + '?' + Object.entries(params).map(entry => entry.join(\"=\")).join(\"&\");\n}\n"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,iBAApB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,YAAT,QAA6B,QAA7B;AAEA,SAASC,oBAAT,EAA+BC,eAA/B,QAAsD,kBAAtD;AAEAC,OAAO,CAACC,GAAR,CAAYL,UAAZ;AAEA,eAAe,MAAMM,QAAN,SAAuBL,YAAvB,CAAoC;EACjDM,WAAW,CAACC,KAAD,EAAQC,KAAR,EAAe;IACxB;IAEA,KAAKC,KAAL,GAAa,EAAb;;IAEA,CAAC,YAAY;MACX,IAAIC,MAAM,GAAG,CAAb;;MACA,OAAO,KAAKD,KAAL,CAAWE,MAAX,GAAoBH,KAA3B,EAAkC;QAEhC,MAAMI,WAAW,GAAG,MAAMC,OAAO,CAACN,KAAD,EAAQG,MAAR,CAAjC;QAEA,KAAKD,KAAL,GAAa,KAAKA,KAAL,CAAWK,MAAX,CAAkBF,WAAW,CAACH,KAA9B,CAAb;QACA,KAAKM,IAAL,CAAU,MAAV,EAAkBH,WAAlB;QACAF,MAAM;MACP;;MACD,KAAKK,IAAL,CAAU,KAAV;IACD,CAXD;EAYD;;AAlBgD;AAqBnD;AACA;AACA;AACA;;AACA,OAAO,eAAeF,OAAf,CAAuBN,KAAvB,EAA8BG,MAA9B,EAAsC;EAC3C,MAAMM,GAAG,GAAGC,MAAM,CAAC,qCAAqCP,MAAtC,EAA8C;IAC9DQ,IAAI,EAAE;EADwD,CAA9C,CAAlB;EAIA,MAAMC,UAAU,GAAGF,MAAM,CAAC,sCAAsCP,MAAM,GAAG,CAA/C,CAAD,EAAoD;IAC3EQ,IAAI,EAAE;EADqE,CAApD,CAAzB;EAGA,MAAME,SAAS,GAAG,MAAMtB,OAAO,CAACkB,GAAD,EAAM;IACnCK,MAAM,EAAE,KAD2B;IAEnCC,OAAO,EAAE;MACP,UAAU,gDADH;MAEP,QAAQ,kBAFD;MAGP,cAAc,uHAHP;MAIP,mBAAmB,OAJZ;MAKP,WAAWH,UALJ;MAMP,cAAc,YANP;MAOP,oBAAoB;IAPb;EAF0B,CAAN,CAA/B;EAaA,MAAMI,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWL,SAAX,CAAf;EACA,OAAOG,MAAP;AACD;AACD,OAAO,SAASN,MAAT,CAAgBS,OAAhB,EAAyBC,MAAzB,EAAiC;EACtC,OAAOD,OAAO,GAAG,GAAV,GAAgBE,MAAM,CAACC,OAAP,CAAeF,MAAf,EAAuBG,GAAvB,CAA2BC,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAW,GAAX,CAApC,EAAqDA,IAArD,CAA0D,GAA1D,CAAvB;AACD"},"metadata":{},"sourceType":"module"}